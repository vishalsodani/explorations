<html>
<head>
<meta name="viewport" content="width=device-width">
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>
Vue.component('input-button', {
  template: '<button  @click="handleUserInput" class="adi butt">{{inputdata}}</button>',
  props:['inputdata'],
  methods: {
	handleUserInput() {
		if (this.inputdata === ""){
			this.$emit('input_given', this);
		};
	}
  }
})
</script>
<style>
.adi {
width:80%
}
.butt {
   border: 1px outset blue;
   background-color: #35de58;
   height:50px;
   width:50px;
   cursor:pointer;
}
</style>

</head>

<div style="margin-left:200px;width:480px" id="app">
<h3 align="center"> {{message}} </h3>
<table width="300px">
<tr>
	<td><input-button :inputdata="tictac_board[0].state" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[1].state" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[2].state" v-on:input_given="updateState"></input-button></td>
</tr>
<tr>
	<td><input-button :inputdata="tictac_board[3].state" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[4].state" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[5].state" v-on:input_given="updateState"></input-button></td>
</tr>
<tr>
	<td><input-button :inputdata="tictac_board[6].state" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[7].state" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[8].state" v-on:input_given="updateState"></input-button></td>
</tr>


</table>

</div>
<script>



var app = new Vue({
  el: '#app',
  data: {
    message: 'Play Tic Tac Toe', 
	current_state: 'nothing',
	tictac_board: [{'state':""}, {'state':""}, {'state':""}, {'state':""} , {'state':""} , {'state':""}, {'state':""} , {'state':""}, {'state':""}],
	winning_combinations: [[0,1,2], [3,4,5], [6,7,8], [0,3,6], [1,4,7], [2,5, 8], [0,4,8], [2,4,6]],
	counter:0,
  },
  methods: {
    updateState: function (event) {
	  
	  this.counter += 1;
      if (this.current_state === 'nothing'){
		this.current_state = 'X';
		this.tictac_board[event._uid-1].state = 'X';
		return;
	  }
	  if (this.current_state === 'X'){
		this.current_state = '0';
		this.tictac_board[event._uid-1].state = '0';
		this.is_winning();
		return;
	  }
	  if (this.current_state === '0'){
		this.current_state = 'X';
		this.tictac_board[event._uid-1].state = 'X';
		this.is_winning();
		return;
	  }
    },
	
	display_winner: function(player) {
		alert(player + ' Wins!!') ;
	},
	
	is_winning:function() {
	
		for(var i=0; i < this.winning_combinations.length; i++)
		{
			var a = this.winning_combinations[i][0]
			var b = this.winning_combinations[i][1];
			var c = this.winning_combinations[i][2];
			if(this.tictac_board[a].state !== "" && this.tictac_board[b].state !== "" && this.tictac_board[c].state !== ""){
				if (this.tictac_board[a].state === this.tictac_board[b].state && this.tictac_board[a].state === this.tictac_board[c].state) {
					this.display_winner(this.tictac_board[0].state);
					return;
				}
			}
		}
		
		if(this.counter == 9){
			alert('draw');
		}
	}
  }
})

</script>
</html>
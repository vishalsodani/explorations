<html>
<head>
<meta name="viewport" content="width=device-width">
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>
Vue.component('input-button', {
  template: '<button  @click="handleUserInput" class="adi butt">{{inputdata}}</button>',
  props:['inputdata'],
  methods: {
	handleUserInput() {
		if (this.inputdata === ""){
			this.$emit('input_given', this);
		};
	}
  }
})
</script>
<style>
.adi {
width:80%
}
.butt {
   border: 1px outset blue;
   background-color: #35de58;
   height:50px;
   width:50px;
   cursor:pointer;
}
</style>

</head>

<div style="margin-left:200px;width:480px" id="app">
<h3 align="center"> {{message}} </h3>
<table width="300px">
<tr>
	<td><input-button :inputdata="inputis" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="inputis" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="inputis" v-on:input_given="updateState"></input-button></td>
</tr>
<tr>
	<td><input-button :inputdata="inputis" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="inputis" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="inputis" v-on:input_given="updateState"></input-button></td>
</tr>
<tr>
	<td><input-button :inputdata="inputis" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="inputis" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="inputis" v-on:input_given="updateState"></input-button></td>
</tr>


</table>

</div>
<script>



var app = new Vue({
  el: '#app',
  data: {
    message: 'Play Tic Tac Toe', 
	current_state: 'nothing',
	tictac_board: [-1,-2,-3,-4,-5,-6,-7,-8,-9],
	counter:0,
	inputis:"",
	
	
  },
  methods: {
    updateState: function (event) {
	  
	  this.counter += 1;
      if (this.current_state === 'nothing'){
		this.current_state = 'X';
		//event.target.value = 'X';
		event.inputdata = 'X';
		this.tictac_board[event._uid-1] = 'X';
		return;
	  }
	  if (this.current_state === 'X'){
		this.current_state = '0';
		//event.target.value = '0';
		event.inputdata = '0';
		this.tictac_board[event._uid-1] = '0';
		this.is_winning();
		return;
	  }
	  if (this.current_state === '0'){
		this.current_state = 'X';
		//event.target.value = 'X';
		event.inputdata = 'X';
		this.tictac_board[event._uid-1] = 'X';
		this.is_winning();
		return;
	  }
    },
	
	display_winner: function(player) {
		alert(player + ' Wins!!') ;
	},
	
	is_winning:function() {
		if (this.tictac_board[0] === this.tictac_board[1] && this.tictac_board[1] === this.tictac_board[2]) {
			this.display_winner(this.tictac_board[0]);
			return;
		}
		
		if (this.tictac_board[0] === this.tictac_board[3] && this.tictac_board[0] === this.tictac_board[6]) {
			this.display_winner(this.tictac_board[0]);
			return;
		}
		
		if (this.tictac_board[1] === this.tictac_board[4] && this.tictac_board[1] === this.tictac_board[7]) {
			this.display_winner(this.tictac_board[1]);
			return;
		}
		
		if (this.tictac_board[2] === this.tictac_board[5] && this.tictac_board[2] === this.tictac_board[8]) {
			this.display_winner(this.tictac_board[2]);
			return;
		}
		
		if (this.tictac_board[3] === this.tictac_board[4] && this.tictac_board[4] === this.tictac_board[5]) {
			this.display_winner(this.tictac_board[3]);
			return;
		}
		if (this.tictac_board[6] === this.tictac_board[7] && this.tictac_board[6] === this.tictac_board[8]) {
			this.display_winner(this.tictac_board[6]);
			return;
		}
		
		if (this.tictac_board[0] === this.tictac_board[4] && this.tictac_board[0] === this.tictac_board[8]) {
			this.display_winner(this.tictac_board[0]);
			return;
		}
		
		if (this.tictac_board[2] === this.tictac_board[4] && this.tictac_board[2] === this.tictac_board[6]) {
			this.display_winner(this.tictac_board[2]);
			return;
		}
		
		if(this.counter == 9){
			alert('draw');
		}
	}
  }
})

</script>
</html>
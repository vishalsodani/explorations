<html>
<head>
<meta name="viewport" content="width=device-width">
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>
Vue.component('input-button', {
  template: '<button  @click="handleUserInput" class="adi butt">{{inputdata}}</button>',
  props:['inputdata'],
  methods: {
	handleUserInput() {
		if (this.inputdata === ""){
			this.$emit('input_given', this);
		};
	}
  }
})
</script>
<style>
.adi {
width:80%
}
.butt {
   border: 1px outset blue;
   background-color: #35de58;
   height:50px;
   width:50px;
   cursor:pointer;
}
</style>

</head>

<div style="margin-left:200px;width:480px" id="app">
<h3 align="center"> {{message}} </h3>
<table width="300px">
<tr>
	<td><input-button :inputdata="tictac_board[0]" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[1]" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[2]" v-on:input_given="updateState"></input-button></td>
</tr>
<tr>
	<td><input-button :inputdata="tictac_board[3]" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[4]" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[5]" v-on:input_given="updateState"></input-button></td>
</tr>
<tr>
	<td><input-button :inputdata="tictac_board[6]" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[7]" v-on:input_given="updateState"></input-button></td>
	<td><input-button :inputdata="tictac_board[8]" v-on:input_given="updateState"></input-button></td>
</tr>


</table>

</div>
<script>



var app = new Vue({
  el: '#app',
  data: {
    message: 'Play Tic Tac Toe', 
	current_state: 'nothing',
	tictac_board: ["","","","","","","","",""],
	winning_combinations: [[0,1,2], [3,4,5], [6,7,8], [0,3,6], [1,4,7], [2,5, 8], [0,4,8], [2,4,6]],
	counter:0,
  },
  methods: {
    updateState: function (event) {
	  
	  this.counter += 1;
      if (this.current_state === 'nothing'){
		this.current_state = 'X';
		this.updateBoard(event._uid-1, 'X');
		return;
	  }
	  if (this.current_state === 'X'){
		this.current_state = '0';
		this.updateBoard(event._uid-1, '0');
		this.is_winning();
		return;
	  }
	  if (this.current_state === '0'){
		this.current_state = 'X';
		this.updateBoard(event._uid-1, 'X');
		this.is_winning();
		return;
	  }
    },
	
	updateBoard(index, value){
		Vue.set(this.tictac_board, index, value);
	},
	
	display_winner: function(player) {
		alert(player + ' Wins!!') ;
		this.restartGame();
	},
	
	restartGame: function(){
		for(var i=0;i<9;i++){
			Vue.set(this.tictac_board, i, "");
			this.current_state = 'nothing';
			this.counter = 0;
		}
	},
	
	is_winning:function() {
	
		for(var i=0; i < this.winning_combinations.length; i++)
		{
			var a = this.winning_combinations[i][0]
			var b = this.winning_combinations[i][1];
			var c = this.winning_combinations[i][2];
			if(this.tictac_board[a] !== "" && this.tictac_board[b] !== "" && this.tictac_board[c] !== ""){
				if (this.tictac_board[a] === this.tictac_board[b] && this.tictac_board[a] === this.tictac_board[c]) {
					this.display_winner(this.tictac_board[a]);
					return;
				}
			}
		}
		
		if(this.counter == 9){
			alert('draw');
			this.restartGame();
		}
	}
  }
})

</script>
</html>